<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>The ZipArchive Library: ZipCentralDir.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff" leftmargin="32" marginwidth="32" topmargin="32" marginheight="32">
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>ZipCentralDir.h</h1><a href="ZipCentralDir_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//&lt;!-- Code:License --&gt;</span>
<a name="l00002"></a>00002 
<a name="l00009"></a>00009 <span class="preprocessor">#if !defined(ZIPARCHIVE_ZIPCENTRALDIR_DOT_H)</span>
<a name="l00010"></a><a class="code" href="ZipCentralDir_8h.html#32b934a9a09c5c5499c0ad5143a7827f">00010</a> <span class="preprocessor"></span><span class="preprocessor">#define ZIPARCHIVE_ZIPCENTRALDIR_DOT_H</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span>
<a name="l00012"></a>00012 <span class="preprocessor">#if _MSC_VER &gt; 1000</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span><span class="preprocessor">#pragma once</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span><span class="preprocessor">#endif // _MSC_VER &gt; 1000</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span>
<a name="l00016"></a>00016 <span class="preprocessor">#if (_MSC_VER &gt; 1000) &amp;&amp; (defined ZIP_HAS_DLL)</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span><span class="preprocessor"> #pragma warning (push)</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor"> #pragma warning( disable : 4251 ) // needs to have dll-interface to be used by clients of class</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="preprocessor">#include "<a class="code" href="ZipException_8h.html">ZipException.h</a>"</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include "<a class="code" href="ZipFileHeader_8h.html">ZipFileHeader.h</a>"</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include "<a class="code" href="ZipAutoBuffer_8h.html">ZipAutoBuffer.h</a>"</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include "ZipCollections.h"</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include "<a class="code" href="ZipCompatibility_8h.html">ZipCompatibility.h</a>"</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include "ZipExport.h"</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 
<a name="l00033"></a><a class="code" href="classCZipCentralDir.html">00033</a> <span class="keyword">class </span>ZIP_API <a class="code" href="classCZipCentralDir.html">CZipCentralDir</a>  
<a name="l00034"></a>00034 {
<a name="l00035"></a>00035 <span class="keyword">public</span>:
<a name="l00036"></a>00036 
<a name="l00049"></a><a class="code" href="structCZipCentralDir_1_1CZipFindFast.html">00049</a>  <span class="keyword">struct </span>ZIP_API CZipFindFast
<a name="l00050"></a>00050  {
<a name="l00051"></a><a class="code" href="structCZipCentralDir_1_1CZipFindFast.html#24503077c66f26b922232e1b66ec9f57">00051</a>   CZipFindFast()
<a name="l00052"></a>00052   {
<a name="l00053"></a>00053    m_uIndex = 0;
<a name="l00054"></a>00054    m_pHeader= NULL;
<a name="l00055"></a>00055   }
<a name="l00056"></a><a class="code" href="structCZipCentralDir_1_1CZipFindFast.html#204e0705f89d7cdd0fa7ba6b18c4d531">00056</a>   CZipFindFast(<a class="code" href="classCZipFileHeader.html">CZipFileHeader</a>* pHeader, ZIP_U16_U64 uIndex):m_pHeader(pHeader), m_uIndex(uIndex){}
<a name="l00057"></a>00057 
<a name="l00061"></a><a class="code" href="structCZipCentralDir_1_1CZipFindFast.html#b4d5943eb712f702e916d5e2d8789e76">00061</a>   <a class="code" href="classCZipFileHeader.html">CZipFileHeader</a>* m_pHeader;
<a name="l00062"></a>00062 
<a name="l00066"></a><a class="code" href="structCZipCentralDir_1_1CZipFindFast.html#d74e48857789651f1c9f15c0d1488eab">00066</a>   ZIP_U16_U64 m_uIndex;
<a name="l00067"></a>00067  };
<a name="l00068"></a>00068  
<a name="l00069"></a>00069 
<a name="l00073"></a><a class="code" href="structCZipCentralDir_1_1Info.html">00073</a>  <span class="keyword">struct </span>ZIP_API Info
<a name="l00074"></a>00074  {
<a name="l00079"></a><a class="code" href="structCZipCentralDir_1_1Info.html#5d90bc29b97617e7b58c6dd22cdfcc77">00079</a>   ZIP_U32_U64   m_uEndOffset;
<a name="l00080"></a>00080 
<a name="l00085"></a><a class="code" href="structCZipCentralDir_1_1Info.html#e432c85128ba395a3e3c8c03b7c5354e">00085</a>   ZIP_U16_U32 m_uLastDisk;
<a name="l00086"></a><a class="code" href="structCZipCentralDir_1_1Info.html#5d17edb07a6cc2a17acc78f9d7085bd1">00086</a>   ZIP_U16_U32 m_uDiskWithCD;  
<a name="l00087"></a><a class="code" href="structCZipCentralDir_1_1Info.html#8d74a95bdf9f92373152e4382aa87e80">00087</a>   ZIP_U16_U64 m_uDiskEntriesNo; 
<a name="l00088"></a><a class="code" href="structCZipCentralDir_1_1Info.html#89f5221dbd218242a422bddff0563c15">00088</a>   ZIP_U16_U64 m_uEntriesNumber; 
<a name="l00089"></a>00089 
<a name="l00094"></a><a class="code" href="structCZipCentralDir_1_1Info.html#055a9be71ce8c4ef76d954bf937ade5d">00094</a>   ZIP_U32_U64 m_uSize;
<a name="l00095"></a>00095 
<a name="l00101"></a><a class="code" href="structCZipCentralDir_1_1Info.html#95b041be17ec669663577a70e1c90b46">00101</a>   ZIP_U32_U64 m_uOffset;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 <span class="preprocessor">#ifdef _ZIP64  </span>
<a name="l00104"></a><a class="code" href="structCZipCentralDir_1_1Info.html#ab02ad8fde2faaebdb78e779fece25a5">00104</a> <span class="preprocessor"></span>  ZIP_U16_U32 m_uEnd64Disk; 
<a name="l00105"></a>00105 <span class="preprocessor">#endif</span>
<a name="l00106"></a>00106 <span class="preprocessor"></span>
<a name="l00110"></a><a class="code" href="structCZipCentralDir_1_1Info.html#66971fa7042ac5551cd4a399cb408cd0">00110</a>   <span class="keywordtype">bool</span> m_bOnDisk;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112  <span class="keyword">protected</span>:
<a name="l00113"></a><a class="code" href="structCZipCentralDir_1_1Info.html#f6d01476466aee6dee41ca64e3f4f263">00113</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classCZipCentralDir.html">CZipCentralDir</a>;
<a name="l00114"></a><a class="code" href="structCZipCentralDir_1_1Info.html#28e1e319046631206ffa25aa408c18b9">00114</a>   <span class="keywordtype">bool</span> CheckIfOK_1()
<a name="l00115"></a>00115   {
<a name="l00116"></a>00116    <span class="keywordflow">return</span> (m_uEndOffset &gt;= m_uOffset + m_uSize);
<a name="l00117"></a>00117   }
<a name="l00118"></a><a class="code" href="structCZipCentralDir_1_1Info.html#ff03bf30b51e2386e5e09856f417ca38">00118</a>   ZIP_U32_U64 CalculateBytesBeforeZip()
<a name="l00119"></a>00119   {
<a name="l00120"></a>00120    <span class="keywordflow">return</span> m_uEndOffset - m_uSize - m_uOffset;
<a name="l00121"></a>00121   }
<a name="l00122"></a><a class="code" href="structCZipCentralDir_1_1Info.html#1bc8cbea099b6162058b970baec5cba5">00122</a>   <span class="keywordtype">bool</span> CheckIfOK_2()
<a name="l00123"></a>00123   {
<a name="l00124"></a>00124    <span class="keywordflow">return</span> (m_uSize || !m_uEntriesNumber) &amp;&amp; (m_uEntriesNumber || !m_uSize);
<a name="l00125"></a>00125   }
<a name="l00126"></a><a class="code" href="structCZipCentralDir_1_1Info.html#5cb2411a13a83a80b1351aeb4dfa2264">00126</a>   <span class="keywordtype">void</span> DiskChange(ZIP_U16_U32 uCurrentDisk)
<a name="l00127"></a>00127   {
<a name="l00128"></a>00128    m_uLastDisk = uCurrentDisk;
<a name="l00129"></a>00129    <span class="keywordflow">if</span> (m_uEntriesNumber)
<a name="l00130"></a>00130    {
<a name="l00131"></a>00131     m_uDiskEntriesNo = 0; 
<a name="l00132"></a>00132    }
<a name="l00133"></a>00133    <span class="keywordflow">else</span>
<a name="l00134"></a>00134    {
<a name="l00135"></a>00135     m_uDiskWithCD = m_uLastDisk;
<a name="l00136"></a>00136     m_uOffset = 0;
<a name="l00137"></a>00137    }
<a name="l00138"></a>00138   }
<a name="l00139"></a>00139   
<a name="l00149"></a><a class="code" href="structCZipCentralDir_1_1Info.html#30cb32280562708d3e2c985134ab835d">00149</a>   <span class="keywordtype">bool</span> NeedsZip64()<span class="keyword"> const</span>
<a name="l00150"></a>00150 <span class="keyword">  </span>{
<a name="l00151"></a>00151    <span class="keywordflow">return</span> m_uLastDisk &gt;= USHRT_MAX || m_uDiskWithCD &gt;= USHRT_MAX || m_uDiskEntriesNo &gt;= USHRT_MAX || m_uEntriesNumber &gt;= USHRT_MAX || m_uSize &gt;= UINT_MAX || m_uOffset &gt;= UINT_MAX;
<a name="l00152"></a>00152   }
<a name="l00153"></a>00153 
<a name="l00154"></a>00154  };
<a name="l00155"></a>00155 
<a name="l00156"></a>00156  <a class="code" href="classCZipCentralDir.html">CZipCentralDir</a>();
<a name="l00157"></a>00157  <span class="keyword">virtual</span> ~<a class="code" href="classCZipCentralDir.html">CZipCentralDir</a>();
<a name="l00158"></a>00158 
<a name="l00159"></a><a class="code" href="classCZipCentralDir.html#fc5205c325c7520fffc5385e0b6f0b2c">00159</a>  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="classCZipCentralDir.html#fc5205c325c7520fffc5385e0b6f0b2c">m_gszSignature</a>[]; 
<a name="l00160"></a><a class="code" href="classCZipCentralDir.html#8b3e2de7e371954d54eb901c114bc7d4">00160</a>  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="classCZipCentralDir.html#8b3e2de7e371954d54eb901c114bc7d4">m_gszSignature64Locator</a>[]; 
<a name="l00161"></a>00161 <span class="preprocessor">#ifdef _ZIP64</span>
<a name="l00162"></a><a class="code" href="classCZipCentralDir.html#29af6810c6e3472960ee07ecfdfa8ca7">00162</a> <span class="preprocessor"></span> <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="classCZipCentralDir.html#29af6810c6e3472960ee07ecfdfa8ca7">m_gszSignature64</a>[]; 
<a name="l00163"></a>00163 <span class="preprocessor">#endif</span>
<a name="l00164"></a>00164 <span class="preprocessor"></span>
<a name="l00165"></a><a class="code" href="classCZipCentralDir.html#094cb31b1659b01187f3eb1b1124b725">00165</a>  <a class="code" href="classCZipAutoBuffer.html">CZipAutoBuffer</a> <a class="code" href="classCZipCentralDir.html#094cb31b1659b01187f3eb1b1124b725">m_pszComment</a>; 
<a name="l00166"></a><a class="code" href="classCZipCentralDir.html#c2415fef9b13e7026aa22b893debd504">00166</a>  <a class="code" href="classCZipFileHeader.html">CZipFileHeader</a>* <a class="code" href="classCZipCentralDir.html#c2415fef9b13e7026aa22b893debd504">m_pOpenedFile</a>; 
<a name="l00167"></a>00167 
<a name="l00171"></a>00171  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#5f5333a9896707e4711e6f1366c71245">Init</a>(<span class="keywordtype">int</span> iPlatform);
<a name="l00172"></a>00172 
<a name="l00179"></a>00179  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#8bd6ae684caf7bf0ba4c46237bb249be">Read</a>();
<a name="l00180"></a>00180 
<a name="l00190"></a>00190  <span class="keywordtype">void</span> <a class="code" href="namespaceZipPlatform.html#3c1d17d400f71485ff45bba1a43aa411">OpenFile</a>(ZIP_U16_U64 uIndex);
<a name="l00191"></a>00191 
<a name="l00201"></a>00201  <span class="keywordtype">bool</span> <a class="code" href="classCZipCentralDir.html#5db18c2d0c0f39374b6bc316e0afb82a">IsValidIndex</a>(ZIP_U16_U64 uIndex)<span class="keyword">const</span>;
<a name="l00202"></a>00202 
<a name="l00219"></a>00219  <span class="keywordtype">void</span> <a class="code" href="namespaceZipPlatform.html#5614646ec1105554180e8bed4c0a84d6">RemoveFile</a>(<a class="code" href="classCZipFileHeader.html">CZipFileHeader</a>* pHeader, ZIP_U16_U64 uIndex = ZIP_FILE_INDEX_UNSPECIFIED, <span class="keywordtype">bool</span> bShift = <span class="keyword">true</span>);
<a name="l00220"></a>00220 
<a name="l00221"></a>00221 
<a name="l00232"></a>00232  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#c2664140a73dbb3481629bfa5e8f98a4">RemoveLastFile</a>(<a class="code" href="classCZipFileHeader.html">CZipFileHeader</a>* pHeader = NULL, ZIP_U16_U64 uIndex = ZIP_FILE_INDEX_UNSPECIFIED);
<a name="l00233"></a>00233 
<a name="l00240"></a>00240  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#048a6f11ad77bf1bd4223ab6c87864da">RemoveAll</a>();
<a name="l00241"></a>00241 
<a name="l00245"></a>00245  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#4ba912d3b1ad77c72c4a28d574dcb06c">Clear</a>();
<a name="l00246"></a>00246 
<a name="l00271"></a>00271  <a class="code" href="classCZipFileHeader.html">CZipFileHeader</a>* <a class="code" href="classCZipCentralDir.html#86915729967da5ddc03e9588cddcc7b2">AddNewFile</a>(<span class="keyword">const</span> <a class="code" href="classCZipFileHeader.html">CZipFileHeader</a> &amp; header, ZIP_U16_U64 uReplaceIndex, <span class="keywordtype">int</span> iLevel, <span class="keywordtype">bool</span> bEncrypted, <span class="keywordtype">bool</span> bRichHeaderTemplateCopy = <span class="keyword">false</span>);
<a name="l00272"></a>00272 
<a name="l00279"></a>00279  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#6d5dadec5a0f366a27ff5fa15e03e11c">RemoveFromDisk</a>();
<a name="l00280"></a>00280 
<a name="l00293"></a>00293  ZIP_U32_U64 <a class="code" href="classCZipCentralDir.html#d106b0329100a73d420e764bb95ed7e2">GetSize</a>(<span class="keywordtype">bool</span> bWhole = <span class="keyword">false</span>) <span class="keyword">const</span>;
<a name="l00294"></a>00294 
<a name="l00304"></a>00304  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#ab296f52125c307d5beba60b07323ad4">CloseFile</a>(<span class="keywordtype">bool</span> skipCheckingDataDescriptor = <span class="keyword">false</span>);
<a name="l00305"></a>00305 
<a name="l00312"></a>00312  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#fc0039f834676c0f278765198e6321a0">CloseNewFile</a>();
<a name="l00313"></a>00313 
<a name="l00320"></a>00320  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#6fe861c4037e38ac89602bd53a584496">Write</a>(<a class="code" href="structCZipActionCallback.html">CZipActionCallback</a>* pCallback);
<a name="l00321"></a>00321  
<a name="l00328"></a>00328  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#b625a977ceab820be56ba49c9c70b7ce">EnableFindFast</a>(<span class="keywordtype">bool</span> bEnable, <span class="keywordtype">bool</span> bCaseSensitive);
<a name="l00329"></a>00329 
<a name="l00336"></a>00336  ZIP_U16_U64 <a class="code" href="classCZipCentralDir.html#0386beaee08584540bf022473087efbb">FindFile</a>(LPCTSTR lpszFileName, <span class="keywordtype">bool</span> bCaseSensitive, <span class="keywordtype">bool</span> bSporadically, <span class="keywordtype">bool</span> bFileNameOnly);
<a name="l00337"></a>00337 
<a name="l00338"></a>00338 
<a name="l00345"></a><a class="code" href="classCZipCentralDir.html#ff54ac1732d68bec0e9f057fd65e04f0">00345</a>  ZIP_U16_U64 <a class="code" href="classCZipCentralDir.html#ff54ac1732d68bec0e9f057fd65e04f0">GetFindFastIndex</a>(ZIP_U16_U64 uFindFastIndex)<span class="keyword">const</span>
<a name="l00346"></a>00346 <span class="keyword"> </span>{
<a name="l00347"></a>00347   <span class="keywordflow">if</span> (!<a class="code" href="classCZipCentralDir.html#5db18c2d0c0f39374b6bc316e0afb82a">IsValidIndex</a>(uFindFastIndex) || !<a class="code" href="classCZipCentralDir.html#86a655a0fa4a2391f2bf4597b982be97">m_bFindFastEnabled</a>)
<a name="l00348"></a>00348    <span class="keywordflow">return</span> ZIP_FILE_INDEX_NOT_FOUND;
<a name="l00349"></a>00349   
<a name="l00350"></a>00350   <span class="keywordflow">return</span> <a class="code" href="classCZipCentralDir.html#be46b92e19b977ea71566564f48fa9b8">m_findarray</a>[(ZIP_ARRAY_SIZE_TYPE)uFindFastIndex].m_uIndex;
<a name="l00351"></a>00351  }
<a name="l00352"></a>00352 
<a name="l00356"></a><a class="code" href="classCZipCentralDir.html#071c291e2bf1bfe5c72045d48b30aefa">00356</a>  <a class="code" href="classCZipStorage.html">CZipStorage</a>* <a class="code" href="classCZipCentralDir.html#071c291e2bf1bfe5c72045d48b30aefa">m_pStorage</a>;
<a name="l00357"></a>00357  
<a name="l00358"></a>00358 
<a name="l00365"></a><a class="code" href="classCZipCentralDir.html#2f58db0950bd96e50f5e79c5dde3e3b4">00365</a>  CZipArray&lt;CZipFileHeader*&gt; <a class="code" href="classCZipCentralDir.html#2f58db0950bd96e50f5e79c5dde3e3b4">m_headers</a>;
<a name="l00366"></a>00366  
<a name="l00373"></a><a class="code" href="classCZipCentralDir.html#c728bce98fadf666574e23c9da5f9462">00373</a>  <a class="code" href="classCZipFileHeader.html">CZipFileHeader</a>* <a class="code" href="classCZipCentralDir.html#c728bce98fadf666574e23c9da5f9462">operator[]</a>(ZIP_U16_U64 uIndex)
<a name="l00374"></a>00374  {
<a name="l00375"></a>00375   <span class="keywordflow">return</span> <a class="code" href="classCZipCentralDir.html#2f58db0950bd96e50f5e79c5dde3e3b4">m_headers</a>[(ZIP_ARRAY_SIZE_TYPE)uIndex];
<a name="l00376"></a>00376  }
<a name="l00377"></a>00377 
<a name="l00384"></a><a class="code" href="classCZipCentralDir.html#830e8248ca3641ff5f6b8b1fab98e740">00384</a>  <span class="keyword">const</span> <a class="code" href="classCZipFileHeader.html">CZipFileHeader</a>* <a class="code" href="classCZipCentralDir.html#c728bce98fadf666574e23c9da5f9462">operator[]</a>(ZIP_U16_U64 uIndex)<span class="keyword"> const</span>
<a name="l00385"></a>00385 <span class="keyword"> </span>{
<a name="l00386"></a>00386   <span class="keywordflow">return</span> <a class="code" href="classCZipCentralDir.html#2f58db0950bd96e50f5e79c5dde3e3b4">m_headers</a>[(ZIP_ARRAY_SIZE_TYPE)uIndex];
<a name="l00387"></a>00387  }
<a name="l00388"></a>00388  
<a name="l00395"></a>00395  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#2e8814008b022ea9fea7ccfd73018a92">SetComment</a>(LPCTSTR lpszComment);
<a name="l00396"></a>00396 
<a name="l00403"></a><a class="code" href="classCZipCentralDir.html#5a471572e75643e07865f6f6aa88f606">00403</a>  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#5a471572e75643e07865f6f6aa88f606">GetComment</a>(CZipString&amp; szComment)<span class="keyword"> const</span>
<a name="l00404"></a>00404 <span class="keyword"> </span>{
<a name="l00405"></a>00405   <a class="code" href="namespaceZipCompatibility.html#a402742c3a1e4fd01ab484fb64d23946">ZipCompatibility::ConvertBufferToString</a>(szComment, <a class="code" href="classCZipCentralDir.html#094cb31b1659b01187f3eb1b1124b725">m_pszComment</a>, <a class="code" href="classCZipCentralDir.html#ce0752940a44fc16b6ce73e68383338f">m_stringSettings</a>.m_uCommentCodePage);
<a name="l00406"></a>00406  }
<a name="l00407"></a>00407  
<a name="l00414"></a>00414  <span class="keywordtype">bool</span> <a class="code" href="classCZipCentralDir.html#0c025bdc82e75ede516b29d6b7371582">SetFileComment</a>(ZIP_U16_U64 uIndex, LPCTSTR lpszComment);
<a name="l00415"></a>00415 
<a name="l00416"></a>00416 
<a name="l00423"></a><a class="code" href="classCZipCentralDir.html#359286b5021f8d8d0125c1c0463f1cf3">00423</a>  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#359286b5021f8d8d0125c1c0463f1cf3">SetStringStoreSettings</a>(UINT uFileNameCodePage, <span class="keywordtype">bool</span> bStoreNameInExtraData, UINT uCommentCodePage)
<a name="l00424"></a>00424  {
<a name="l00425"></a>00425   <a class="code" href="classCZipCentralDir.html#ce0752940a44fc16b6ce73e68383338f">m_stringSettings</a>.m_uNameCodePage = uFileNameCodePage;
<a name="l00426"></a>00426   <a class="code" href="classCZipCentralDir.html#ce0752940a44fc16b6ce73e68383338f">m_stringSettings</a>.m_bStoreNameInExtraData = bStoreNameInExtraData;
<a name="l00427"></a>00427   <a class="code" href="classCZipCentralDir.html#ce0752940a44fc16b6ce73e68383338f">m_stringSettings</a>.m_uCommentCodePage = uCommentCodePage;
<a name="l00428"></a>00428  }
<a name="l00429"></a>00429 
<a name="l00443"></a>00443  ZIP_U16_U64 <a class="code" href="classCZipCentralDir.html#b7a89bac13eaccb45e95712c7113c6c8">FindFileNameIndex</a>(LPCTSTR lpszFileName) <span class="keyword">const</span>;
<a name="l00444"></a>00444 
<a name="l00451"></a><a class="code" href="classCZipCentralDir.html#314282a84494c2c29bae7e7677eb5008">00451</a>  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#314282a84494c2c29bae7e7677eb5008">GetInfo</a>(Info&amp; info)<span class="keyword"> const </span>{info = <a class="code" href="classCZipCentralDir.html#8447a9e55a00253a2c6074886124ab7a">m_info</a>;}
<a name="l00452"></a>00452 
<a name="l00459"></a><a class="code" href="classCZipCentralDir.html#ae6d7a00f58ba0937ff4c07a4bb92aa8">00459</a>  <span class="keywordtype">bool</span> <a class="code" href="classCZipCentralDir.html#ae6d7a00f58ba0937ff4c07a4bb92aa8">IsFindFastEnabled</a>(){<span class="keywordflow">return</span> <a class="code" href="classCZipCentralDir.html#86a655a0fa4a2391f2bf4597b982be97">m_bFindFastEnabled</a>;}
<a name="l00460"></a>00460  
<a name="l00464"></a><a class="code" href="classCZipCentralDir.html#01bc5145fc87b2163556302a243504c6">00464</a>  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#01bc5145fc87b2163556302a243504c6">RebuildFindFastArray</a>()
<a name="l00465"></a>00465  {
<a name="l00466"></a>00466   <span class="keywordflow">if</span> (<a class="code" href="classCZipCentralDir.html#86a655a0fa4a2391f2bf4597b982be97">m_bFindFastEnabled</a>)
<a name="l00467"></a>00467    <a class="code" href="classCZipCentralDir.html#3ef7004aa5852dbcb57cf0513806a9f0">BuildFindFastArray</a>(<a class="code" href="classCZipCentralDir.html#3ac093905ed460e4fdc7e6d993730546">m_bCaseSensitive</a>);
<a name="l00468"></a>00468  }
<a name="l00469"></a>00469 
<a name="l00476"></a><a class="code" href="classCZipCentralDir.html#ce0752940a44fc16b6ce73e68383338f">00476</a>  CZipStringStoreSettings <a class="code" href="classCZipCentralDir.html#ce0752940a44fc16b6ce73e68383338f">m_stringSettings</a>;
<a name="l00477"></a>00477 
<a name="l00478"></a>00478 <span class="keyword">protected</span>:
<a name="l00479"></a>00479 
<a name="l00480"></a>00480 <span class="preprocessor">#ifdef _ZIP64</span>
<a name="l00481"></a>00481 <span class="preprocessor"></span>
<a name="l00484"></a>00484  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#2bd3538f8b771be8a250f5aa51662132">ReadZip64Info</a>();
<a name="l00485"></a>00485 <span class="preprocessor">#endif</span>
<a name="l00486"></a>00486 <span class="preprocessor"></span>
<a name="l00490"></a>00490  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#d334e00af2f3c4ec8edf7e32e5530ccb">SortHeaders</a>();
<a name="l00491"></a>00491 
<a name="l00495"></a><a class="code" href="classCZipCentralDir.html#97197430347c2241623f8867488bea4d">00495</a>  <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classCZipCentralDir.html#97197430347c2241623f8867488bea4d">CompareHeaders</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *pArg1, <span class="keyword">const</span> <span class="keywordtype">void</span> *pArg2)
<a name="l00496"></a>00496  {
<a name="l00497"></a>00497   <a class="code" href="classCZipFileHeader.html">CZipFileHeader</a>* pw1 = *(<a class="code" href="classCZipFileHeader.html">CZipFileHeader</a>**)pArg1;
<a name="l00498"></a>00498   <a class="code" href="classCZipFileHeader.html">CZipFileHeader</a>* pw2 = *(<a class="code" href="classCZipFileHeader.html">CZipFileHeader</a>**)pArg2;
<a name="l00499"></a>00499   <span class="keywordflow">if</span> (pw1-&gt;<a class="code" href="classCZipFileHeader.html#4e325b05e4f3e491be8ea5b70df714d7">m_uDiskStart</a> == pw2-&gt;<a class="code" href="classCZipFileHeader.html#4e325b05e4f3e491be8ea5b70df714d7">m_uDiskStart</a>)
<a name="l00500"></a>00500   {
<a name="l00501"></a>00501    <span class="keywordflow">if</span> (pw1-&gt;<a class="code" href="classCZipFileHeader.html#840bfde285ff0f307d6973cdb298a10a">m_uOffset</a> &lt; pw2-&gt;<a class="code" href="classCZipFileHeader.html#840bfde285ff0f307d6973cdb298a10a">m_uOffset</a>)
<a name="l00502"></a>00502     <span class="keywordflow">return</span> -1;
<a name="l00503"></a>00503    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pw1-&gt;<a class="code" href="classCZipFileHeader.html#840bfde285ff0f307d6973cdb298a10a">m_uOffset</a> &gt; pw2-&gt;<a class="code" href="classCZipFileHeader.html#840bfde285ff0f307d6973cdb298a10a">m_uOffset</a>)
<a name="l00504"></a>00504     <span class="keywordflow">return</span> 1;
<a name="l00505"></a>00505     ASSERT(FALSE);
<a name="l00506"></a>00506 
<a name="l00507"></a>00507    <span class="comment">// two files with the same offsets on the same disk???</span>
<a name="l00508"></a>00508    <a class="code" href="classCZipException.html#66bd46de14ccf5d31304975ba91cc70e">CZipException::Throw</a>(<a class="code" href="classCZipException.html#a4f3fc7c792e57a0a6881b6ea48725af7540c39a73f3b5ebfaca049981451753">CZipException::badZipFile</a>);
<a name="l00509"></a>00509    <span class="keywordflow">return</span> 0; <span class="comment">// just for the compiler comfort</span>
<a name="l00510"></a>00510   }
<a name="l00511"></a>00511   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pw1-&gt;<a class="code" href="classCZipFileHeader.html#4e325b05e4f3e491be8ea5b70df714d7">m_uDiskStart</a> &lt; pw2-&gt;<a class="code" href="classCZipFileHeader.html#4e325b05e4f3e491be8ea5b70df714d7">m_uDiskStart</a>)
<a name="l00512"></a>00512    <span class="keywordflow">return</span> -1;
<a name="l00513"></a>00513   <span class="keywordflow">else</span> <span class="comment">// if (pw1-&gt;m_uDiskStart &gt; pw2-&gt;m_uDiskStart)</span>
<a name="l00514"></a>00514    <span class="keywordflow">return</span> 1;  
<a name="l00515"></a>00515  }
<a name="l00516"></a>00516 
<a name="l00517"></a>00517 
<a name="l00521"></a>00521  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#3ef7004aa5852dbcb57cf0513806a9f0">BuildFindFastArray</a>( <span class="keywordtype">bool</span> bCaseSensitive );
<a name="l00522"></a>00522 
<a name="l00533"></a><a class="code" href="classCZipCentralDir.html#be46b92e19b977ea71566564f48fa9b8">00533</a>  CZipArray&lt;CZipFindFast&gt; <a class="code" href="classCZipCentralDir.html#be46b92e19b977ea71566564f48fa9b8">m_findarray</a>;
<a name="l00534"></a>00534 
<a name="l00538"></a><a class="code" href="classCZipCentralDir.html#86a655a0fa4a2391f2bf4597b982be97">00538</a>  <span class="keywordtype">bool</span> <a class="code" href="classCZipCentralDir.html#86a655a0fa4a2391f2bf4597b982be97">m_bFindFastEnabled</a>; 
<a name="l00539"></a>00539 
<a name="l00555"></a><a class="code" href="classCZipCentralDir.html#60c4a68ceb01047452c5b155338b0e99">00555</a>  <span class="keywordtype">int</span> <a class="code" href="classCZipCentralDir.html#60c4a68ceb01047452c5b155338b0e99">CompareElement</a>(LPCTSTR lpszFileName, ZIP_U16_U64 uIndex)<span class="keyword"> const</span>
<a name="l00556"></a>00556 <span class="keyword"> </span>{
<a name="l00557"></a>00557   <span class="keywordflow">return</span> (<a class="code" href="classCZipCentralDir.html#be46b92e19b977ea71566564f48fa9b8">m_findarray</a>[(ZIP_ARRAY_SIZE_TYPE)uIndex].m_pHeader-&gt;GetFileName().*<a class="code" href="classCZipCentralDir.html#590ceb79476814d33e7b503a8f903320">m_pCompare</a>)(lpszFileName);
<a name="l00558"></a>00558  }
<a name="l00559"></a>00559 
<a name="l00574"></a>00574  ZIP_U16_U64 <a class="code" href="classCZipCentralDir.html#3fc2f6edf2f0d3ff34e054948ef2f202">InsertFindFastElement</a>(<a class="code" href="classCZipFileHeader.html">CZipFileHeader</a>* pHeader, ZIP_U16_U64 uIndex);
<a name="l00575"></a>00575 
<a name="l00579"></a><a class="code" href="classCZipCentralDir.html#590ceb79476814d33e7b503a8f903320">00579</a>  ZIPSTRINGCOMPARE <a class="code" href="classCZipCentralDir.html#590ceb79476814d33e7b503a8f903320">m_pCompare</a>;
<a name="l00580"></a>00580 
<a name="l00584"></a><a class="code" href="classCZipCentralDir.html#3ac093905ed460e4fdc7e6d993730546">00584</a>  <span class="keywordtype">bool</span> <a class="code" href="classCZipCentralDir.html#3ac093905ed460e4fdc7e6d993730546">m_bCaseSensitive</a>;
<a name="l00585"></a>00585 
<a name="l00592"></a><a class="code" href="classCZipCentralDir.html#8447a9e55a00253a2c6074886124ab7a">00592</a>  Info <a class="code" href="classCZipCentralDir.html#8447a9e55a00253a2c6074886124ab7a">m_info</a>;
<a name="l00593"></a>00593 
<a name="l00600"></a>00600  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#c6299361f576e957f555e7cc2671b4d2">ReadHeaders</a>();
<a name="l00601"></a>00601 
<a name="l00605"></a>00605  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#422ba468a94fc77a46fd9206f3611972">RemoveHeaders</a>();
<a name="l00606"></a>00606 
<a name="l00621"></a>00621  <span class="keywordtype">bool</span> <a class="code" href="classCZipCentralDir.html#d9c27ab2de8522d56039c771ff2a6d27">RemoveDataDescr</a>(<span class="keywordtype">bool</span> bFromBuffer);
<a name="l00622"></a>00622 
<a name="l00628"></a>00628  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#48a661e89ad01715c5f6e7010ab0e0dd">WriteHeaders</a>(<a class="code" href="structCZipActionCallback.html">CZipActionCallback</a>* pCallback, <span class="keywordtype">bool</span> bOneDisk);
<a name="l00629"></a>00629 
<a name="l00639"></a>00639  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#45b607f7eb64825fb87b9f48f05049c5">WriteCentralEnd</a>();
<a name="l00640"></a>00640 
<a name="l00641"></a>00641 <span class="preprocessor">#ifdef _ZIP64</span>
<a name="l00642"></a>00642 <span class="preprocessor"></span>
<a name="l00645"></a>00645  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#68c10b55ea54bc61cb145578f01f9eed">WriteCentralEnd64</a>();
<a name="l00646"></a>00646 <span class="preprocessor">#endif</span>
<a name="l00647"></a>00647 <span class="preprocessor"></span>
<a name="l00651"></a>00651  <span class="keywordtype">void</span> <a class="code" href="classCZipCentralDir.html#d054850211897511a3a55caf1f60c0a2">ThrowError</a>(<span class="keywordtype">int</span> err) <span class="keyword">const</span>;
<a name="l00652"></a>00652 };
<a name="l00653"></a>00653 
<a name="l00654"></a>00654 <span class="preprocessor">#if (_MSC_VER &gt; 1000) &amp;&amp; (defined ZIP_HAS_DLL)</span>
<a name="l00655"></a>00655 <span class="preprocessor"></span><span class="preprocessor"> #pragma warning (pop) </span>
<a name="l00656"></a>00656 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00657"></a>00657 <span class="preprocessor"></span>
<a name="l00658"></a>00658 <span class="preprocessor">#endif // !defined(ZIPARCHIVE_ZIPCENTRALDIR_DOT_H)</span>
</pre></div><hr><address><small>
The ZipArchive Library Copyright &copy;&nbsp;2000 - 2006 Tadeusz Dracz. Generated at Mon Nov 27 21:42:23 2006.
</small></address>
</body>
</html>
